<!DOCTYPE html>
<script
      src="https://code.jquery.com/jquery-3.2.1.min.js"
      integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
      crossorigin="anonymous"></script>
  <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

 <head>LGBT-Youth Line</head>
 <body>
 </br>
 	<h2> Event</h2>
 </br>
 	<input type = "text" id = "title" placeholder = "type event title">
 </br>
 	<input type = "text" id = "source" placeholder = "type your source">
 </br>
 	<input type = "text" id = "date" placeholder = "type your submit date">
  </br>
  	<input type = "text" id = "content" placeholder = "type your brief content">
 </br>
 	<input type = "text" id = "image" placeholder="type your image url">
 </br>
 	<input type = "text" id = "main" placeholder="type your main content">
 </br>
 	<input type = "text" id = "address" placeholder="type your event place">
 </br>
 	<input type = "text" id = "event_date" placeholder="type your event date">
 </br>
 	<input type = "text" id = "event_time" placeholder="type your event time">
 </br>
 	<input type = "text" id = "evnet_website" placeholder="type your event website">
</br>
	<button type = "button" id = "submit_event">submit</button>
<table id = "list_event" cellspacing = "0px" cellpadding = "20px" text-align = "center">
            <thead>
                <tr>
                    <td>Event ID</td>
                    <td>Event Title</td>
                </tr>
            </thead>

            <tbody>

            </tbody>
</table>
	<button type = "button" id = "get_event"> get all event</button>
</br>
	<input type = "text" id = "delete_event" placeholder = "type event id">
	<button type = "button" id = deleteb_event> delete</button>

<h2> resources</h2>
</br>
	<input type = "text" id = "r_category" placeholder = "type your category">
</br>
	<input type = "text" id = "r_title" placeholder = "type your title">
</br>
	<input type = "text" id = "r_url" placeholder = "type your url">
</br>
	<input type = "text" id = "r_image" placeholder = "type your image">
</br>
	<button type = "button" id = "resource_submit" >Submit</button>
<table id = "list_resource" cellspacing = "0px" cellpadding = "20px" text-align = "center">
            <thead>
                <tr>
                    <td>resource ID</td>
                    <td>resource Title</td>
                </tr>
            </thead>

            <tbody>

            </tbody>
</table>
</br>
	<button type = "button" id = "get_resource"> get all resources</button>
</br>
	<input type = "text" id = "delet_resource" placeholder = "type resource id">
	<button type = "button" id = deletb_resource>Delete</button>
</body>
<script >
	function addEvent(){
		$("#list_event tbody tr").remove(); 
		var row = "";
		row += "<tr><td>" + "1" + "</td><td>" + "2"  + "</td></tr>";
		$(row).appendTo("#list_event tbody");

	}
	function sendEvent(){
		var etitle = $(title).val();
		var esource = $(source).val();
		var edate = $(date).val();
		var econtent = $(content).val();
		var eimage = $(image).val();
		var emain = $(main).val();
		var eaddress = $(address).val();
		var eEventDate = $(event_date).val();
		var eEventTime = $(event_time).val();
		var eEventW = $(evnet_website).val();
		var data = JSON.stringify({"title":etitle, "source":esource, "release_date":edate,
									"b_content":econtent, "image_url":eimage, "main_content":emain,
									"address":eaddress, "event_date":eEventDate, "event_time":eEventTime,
									"map":"", "event_website":eEventW});
		console.log(data);
		$.ajax({
			url:'http://localhost:80/event',
			method:'POST',
			data: data,
        	contentType:"application/json",
        	success:
        		console.log("success")

			})
	}
	function addResource(){
    $.ajax({
      url: 'http://localhost:80/resources/rid',
      method: 'GET',
      dataType: 'html'
        }).then(data => {
          $("#list_resource tbody tr").remove();
          d = JSON.parse(data)
          console.log("reload resources");
          var rows = "";
          d.forEach(elem =>{
          	var rid = elem["rid"]
          	var title = elem["title"]
          	rows += "<tr><td>" + rid + "</td><td>" + title  + "</td></tr>";

          })
          $(rows).appendTo("#list_resource tbody");
        })
	}
	function sendResource(){
		var rtitle = $(r_title).val();
		var rcategory = $(r_category).val();
		var rurl = $(r_url).val();
		var rimage = $(r_image).val();
		var data = JSON.stringify({"category":rcategory, "title": rtitle, "resource_url":rurl, 
								  "img":rimage})
		console.log(data);
		$.ajax({
			url:'http://localhost:80/resources',
			method:'POST',
			data: data,
        	contentType:"application/json",
        	success:
        		console.log("success")
		})
	}
	function sendEid(){
		var eid = $(delete_event).val();
		var data = JSON.stringify({"eid":eid})
		$.ajax({
			url:'http://localhost:80/event',
			method:'DELETE',
			data: data,
        	contentType:"application/json",
        	success:
        		console.log("success")
		})
	}
	function sendrid(){
		var rid = $(delet_resource).val();
		var data = JSON.stringify({"rid":rid})
		$.ajax({
			url:'http://localhost:80/resources',
			method:'DELETE',
			data: data,
        	contentType:"application/json",
        	success:
        		console.log("success")
        		

		})
	}
	$("#get_event").click(function(){
		addEvent();
	})

	$("#get_resource").click(function(){
		addResource();
	})
	$("#submit_event").click(function(){
		sendEvent();
	})
	$("#resource_submit").click(function(){
		sendResource();
	})
	$("#deleteb_event").click(function(){
		sendEid();
	})
	$("#deletb_resource").click(function(){
		sendrid();
		// $("#list_resource tbody tr").remove();
		// addResource();
	})

</script>